# 🏠 Property AI Agent - Ultra Fast RAG System

A cutting-edge Retrieval-Augmented Generation (RAG) system that combines semantic search, dynamic analytics, and AI-powered responses for property data exploration. Built with modern web technologies and optimized for speed and accuracy.

## ✨ Key Features

- **🚀 Ultra Fast Performance**: Cached AI models for instant responses (< 2s)
- **🧠 Hybrid AI Architecture**: Combines vector search + dynamic pandas analytics
- **🎨 Beautiful Web Interface**: Modern, responsive UI with real-time interactions
- **📊 Advanced Analytics**: AI-generated pandas queries with live data processing
- **🔍 Semantic Search**: Natural language queries with intelligent constraint extraction
- **📱 Mobile Responsive**: Works seamlessly across all devices
- **⚡ Real-time Processing**: Live toggle panels for code, data, and vector matches

## 🏗️ System Architecture

```
User Query → Analytics Agent (Pandas) → Vector Search (Pinecone) → AI Response (Gemini)
                ↓                           ↓                        ↓
         Dynamic Code Generation    Semantic Similarity        Intelligent Response
```

### Core Components

1. **Property RAG Agent**: Main orchestrator combining all AI services
2. **Data Analytics Agent**: Dynamic pandas code generation and execution
3. **Vector Search Engine**: Pinecone-powered semantic similarity search
4. **AI Response Generator**: Gemini-powered intelligent response generation
5. **Web Interface**: Flask-based modern UI with real-time updates

## 🛠️ Technology Stack

### Backend
- **Python 3.12+**: Core application language
- **Flask**: Web framework with threaded processing
- **Pandas**: Data manipulation and analytics
- **NumPy**: Numerical computing

### AI/ML Services
- **Pinecone**: Vector database for semantic search
- **HuggingFace Transformers**: Sentence embeddings (all-MiniLM-L6-v2)
- **Google Gemini**: Large language model for responses
- **Sentence Transformers**: Text-to-vector conversion

### Frontend
- **HTML5/CSS3**: Modern web standards
- **JavaScript ES6+**: Interactive functionality
- **Font Awesome**: Professional icons
- **Marked.js**: Markdown rendering

## 📦 Installation

### Prerequisites
- Python 3.12 or higher
- pip package manager
- Internet connection for API services

### Quick Start

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd simplyphi
   ```

2. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

3. **Ensure data files exist**
   - `property_embeddings_ready.csv` (generated by EDA script)
   - `property_data_cleaned.csv` (optional, for analytics)

4. **Run the application**
   ```bash
   python app.py
   ```

5. **Access the web interface**
   - Open browser: http://localhost:7860
   - Start asking questions about properties!

## 🎯 Usage Examples

### Sample Queries

Try these example queries to explore the system:

- **"highest crime rate in which city?"** - Analytics-driven insights
- **"2 bedroom apartments under £1500"** - Price and room filtering
- **"new homes with 3+ bedrooms"** - Multiple constraint filtering
- **"studio apartments in low crime areas"** - Safety-based search
- **"compare prices between studio and 2 bedroom"** - Comparative analysis
- **"properties with flood risk"** - Risk assessment queries
- **"best value property type"** - Value analysis
- **"most expensive location"** - Market analysis

### Interactive Features

1. **Test Question Chips**: Click pre-built questions for instant testing
2. **Toggle Panels**: Explore AI internals
   - **Pandas Code**: View AI-generated analytics code
   - **Analytics Data**: See processed results
   - **Vector Matches**: Examine semantic search results
3. **Real-time Updates**: Panels reset automatically for each query
4. **Response Timing**: See actual processing speed

## 📊 Data Pipeline

### Data Processing Flow

1. **Raw Data** → EDA Script → **Cleaned Dataset**
2. **Cleaned Dataset** → Feature Engineering → **Embeddings Ready**
3. **Embeddings Ready** → Vector Generation → **Pinecone Index**
4. **User Query** → Analytics + Vector Search → **AI Response**

### Data Statistics

- **Total Properties**: 147,666+ records
- **Embedding Dimension**: 384 (all-MiniLM-L6-v2)
- **Vector Database**: Pinecone (AWS Serverless)
- **Search Speed**: < 100ms average
- **Response Time**: < 2s end-to-end

## 🔧 Configuration

### Environment Variables

```bash
# Optional: Limit upload size for testing
export SAMPLE_UPLOAD_LIMIT=1000

# Optional: Run in headless mode
export HEADLESS=1
```

### API Configuration

The system uses the following API services:

- **Pinecone**: Vector database storage and search
- **HuggingFace**: Sentence transformer models
- **Google Gemini**: Language model for responses

*Note: API keys are configured in the code. For production, use environment variables.*

## 🚀 Performance Optimizations

### Caching Strategy
- **Model Caching**: AI models loaded once and reused
- **Connection Pooling**: Persistent API connections
- **Response Caching**: Intelligent caching for repeated queries

### Speed Improvements
- **Batch Processing**: Efficient vector operations
- **Parallel Processing**: Concurrent API calls
- **Optimized Queries**: Smart constraint extraction
- **Fallback Mechanisms**: Graceful degradation

## 🎨 UI/UX Features

### Modern Design
- **Dark Theme**: Professional dark mode interface
- **Glassmorphism**: Modern blur effects and transparency
- **Gradient Accents**: Beautiful color transitions
- **Smooth Animations**: Hover effects and transitions

### User Experience
- **Instant Feedback**: Real-time loading states
- **Error Handling**: Graceful error messages
- **Mobile First**: Responsive design for all devices
- **Accessibility**: Keyboard navigation and screen reader support

## 🔍 Advanced Features

### AI Agent Capabilities
- **Natural Language Understanding**: Complex query parsing
- **Constraint Extraction**: Automatic filtering logic
- **Code Generation**: Dynamic pandas queries
- **Context Awareness**: Intelligent response generation

### Analytics Engine
- **Dynamic Queries**: AI-generated pandas code
- **Data Validation**: Safe execution environment
- **Error Recovery**: Fallback query strategies
- **Result Formatting**: Clean data presentation

## 🐛 Troubleshooting

### Common Issues

1. **"No response generated"**
   - Check API keys and internet connection
   - Verify data files exist
   - Check console for error messages

2. **"Processing failed"**
   - Ensure all dependencies are installed
   - Check API service availability
   - Verify data file format

3. **Slow responses**
   - Check internet connection
   - Verify API service status
   - Consider reducing query complexity

4. **Empty results**
   - Try different query phrasing
   - Check if data contains relevant information
   - Verify vector database is populated

### Debug Mode

Enable debug logging by checking the terminal output for detailed processing information.

## 📈 Future Enhancements

### Planned Features
- **Multi-language Support**: International property data
- **Advanced Visualizations**: Interactive charts and graphs
- **Export Functionality**: Download results in various formats
- **User Authentication**: Personalized experiences
- **API Endpoints**: RESTful API for integration

### Performance Improvements
- **Caching Layer**: Redis for response caching
- **Load Balancing**: Multiple server instances
- **CDN Integration**: Static asset optimization
- **Database Optimization**: Query performance tuning

## 🤝 Contributing

We welcome contributions! Please see our contributing guidelines for:
- Code style and standards
- Testing requirements
- Pull request process
- Issue reporting

## 📄 License

This project is licensed under the MIT License - see the LICENSE file for details.

## 🙏 Acknowledgments

- **Pinecone**: Vector database infrastructure
- **HuggingFace**: Open-source ML models
- **Google**: Gemini language model
- **Flask**: Web framework
- **Pandas**: Data manipulation library

## 📞 Support

For support and questions:
- Create an issue in the repository
- Check the troubleshooting section
- Review the documentation
- Contact the development team

---

**Built with ❤️ for the property industry**

*Experience the future of property search with AI-powered insights!*